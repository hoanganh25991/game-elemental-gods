<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

    <!-- SEO Meta Tags -->
    <meta name="description"
        content="Choose your elemental champion from the Pantheon of Gods. Command thunder, fire, water, air, metal, or earth in epic divine battles.">
    <meta name="keywords" content="elemental gods, mythology game, divine champions, battle game, elemental powers">
    <meta name="author" content="EGS">

    <!-- Open Graph Meta Tags -->
    <meta property="og:title" content="EGS RPG">
    <meta property="og:description"
        content="Master the elements and command divine powers. Choose from 6 legendary gods - Thunder, Fire, Water, Air, Metal, and Earth. Enter the grand stage and unleash your elemental fury.">
    <meta property="og:image" content="image/background.png">
    <meta property="og:image:width" content="1200">
    <meta property="og:image:height" content="630">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://hoanganh25991.github.io/game-elemental-gods/">
    <meta property="og:site_name" content="EGS">

    <!-- Twitter Card Meta Tags -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="EGS RPG">
    <meta name="twitter:description"
        content="Master the elements and command divine powers. Choose from 6 legendary gods and enter epic battles.">
    <meta name="twitter:image" content="image/background.png">

    <!-- Favicons -->
    <link rel="icon" type="image/x-icon" href="favicon.ico">
    <link rel="icon" type="image/png" sizes="32x32" href="icon.png">
    <link rel="apple-touch-icon" href="icon.png">

    <!-- PWA Manifest -->
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#ff6b35">

    <title>EGS RPG</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="landscape.css">
</head>

<body>
    <!-- Home Screen -->
    <div class="home-screen" id="home-screen">
        <h1 class="home-title" data-i18n="home.title">ELEMENTAL GODS</h1>
        <button class="start-button" id="start-button" data-i18n="home.start">START</button>
    </div>

    <!-- Language Switcher -->
    <div class="language-switcher">
        <button class="lang-btn active" data-lang="vi">üáªüá≥ VI</button>
        <button class="lang-btn" data-lang="en">üá¨üáß EN</button>
    </div>

    <!-- Main Stage Container -->
    <div class="grand-stage">
        <!-- Background Effects -->
        <div class="stage-backdrop">
            <div class="backdrop-particles"></div>
            <div class="backdrop-glow"></div>
        </div>

        <!-- Main Hero Showcase Stage -->
        <div class="hero-stage">
            <div class="stage-content">
                <!-- Hero Figure -->
                <div class="hero-figure">
                    <img id="hero-image" src="image/got-heroic-figure-standing.png" alt="Hero"
                        onerror="this.style.display='none'">
                    <div class="figure-glow"></div>
                </div>

                <!-- Hero Info Panel -->
                <div class="hero-info-panel">
                    <div class="hero-rank">DIVINE CHAMPION</div>
                    <h1 class="stage-hero-name">THOR</h1>
                    <p class="stage-hero-title">God of Thunder</p>

                    <div class="hero-stats-display">
                        <div class="stat-circle">
                            <div class="stat-value" data-stat="power">95</div>
                            <div class="stat-label">POWER</div>
                        </div>
                        <div class="stat-circle">
                            <div class="stat-value" data-stat="control">88</div>
                            <div class="stat-label">CONTROL</div>
                        </div>
                        <div class="stat-circle">
                            <div class="stat-value" data-stat="wisdom">82</div>
                            <div class="stat-label">WISDOM</div>
                        </div>
                    </div>

                    <p class="hero-tagline">Master of lightning and storms, commanding the fury of the heavens.</p>

                    <button class="enter-battle-btn" id="play-button">
                        <span class="btn-text">ENTER BATTLE</span>
                        <span class="btn-glow"></span>
                    </button>
                </div>
            </div>

            <!-- Elemental Particles -->
            <div class="elemental-particles" id="stage-particles"></div>
        </div>

        <!-- Card Selection Stack -->
        <div class="card-stack-container">
            <div class="stack-title">SELECT YOUR CHAMPION</div>
            <div class="hero-card-stack" id="card-stack">
                <!-- God of Thunder -->
                <div class="stack-card active" data-hero="got">
                    <div class="card-content">
                        <div class="card-icon">‚ö°</div>
                        <div class="card-name">Thunder</div>
                    </div>
                    <div class="card-shine"></div>
                </div>

                <!-- God of Fire -->
                <div class="stack-card" data-hero="gof">
                    <div class="card-content">
                        <div class="card-icon">üî•</div>
                        <div class="card-name">Fire</div>
                    </div>
                    <div class="card-shine"></div>
                </div>

                <!-- God of Water -->
                <div class="stack-card" data-hero="gow">
                    <div class="card-content">
                        <div class="card-icon">üåä</div>
                        <div class="card-name">Water</div>
                    </div>
                    <div class="card-shine"></div>
                </div>

                <!-- God of Air -->
                <div class="stack-card" data-hero="goa">
                    <div class="card-content">
                        <div class="card-icon">üí®</div>
                        <div class="card-name">Air</div>
                    </div>
                    <div class="card-shine"></div>
                </div>

                <!-- God of Metal -->
                <div class="stack-card" data-hero="gom">
                    <div class="card-content">
                        <div class="card-icon">‚öíÔ∏è</div>
                        <div class="card-name">Metal</div>
                    </div>
                    <div class="card-shine"></div>
                </div>

                <!-- God of Earth -->
                <div class="stack-card" data-hero="goe">
                    <div class="card-content">
                        <div class="card-icon">üåø</div>
                        <div class="card-name">Earth</div>
                    </div>
                    <div class="card-shine"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- Detail Modal (for abilities) -->
    <div class="detail-modal" id="detail-modal">
        <button class="modal-close" id="modal-close">‚úï</button>
        <div class="modal-content">
            <h2 class="modal-title">Divine Abilities</h2>
            <div class="abilities-grid" id="abilities-grid"></div>
        </div>
    </div>

    <!-- Rotate Overlay for Mobile Portrait Mode -->
    <div class="rotate-overlay">
        <div>
            <div style="font-size: 64px; margin-bottom: 20px;">üì±</div>
            <h2 data-i18n="rotate.title">Rotate Your Device</h2>
            <p data-i18n="rotate.message">Please rotate your device to landscape mode for the best gaming experience.
            </p>
        </div>
    </div>

    <!-- Lock Zoom Script -->
    <script src="lock-zoom.js"></script>

    <!-- Service Worker Registration -->
    <script>
        // Register Service Worker for PWA functionality
        if ('serviceWorker' in navigator) {
            if (window.location.hostname == "localhost") {
                console.log("Skip serviceworker on localhost");
            } else {
                window.addEventListener('load', () => {
                    navigator.serviceWorker.register('./serviceworker.js')
                        .then((registration) => {
                            console.log('ServiceWorker registered successfully:', registration.scope);

                            // Check for updates
                            registration.addEventListener('updatefound', () => {
                                const newWorker = registration.installing;
                                console.log('New ServiceWorker found, installing...');

                                newWorker.addEventListener('statechange', () => {
                                    if (newWorker.state === 'installed' && navigator.serviceWorker.controller) {
                                        console.log('New ServiceWorker installed, ready to activate');
                                        // Optionally show update notification to user
                                    }
                                });
                            });
                        })
                        .catch((error) => {
                            console.error('ServiceWorker registration failed:', error);
                        });
                });

                // Handle service worker updates
                let refreshing = false;
                navigator.serviceWorker.addEventListener('controllerchange', () => {
                    if (!refreshing) {
                        refreshing = true;
                        console.log('ServiceWorker controller changed, reloading page...');
                        window.location.reload();
                    }
                });
            }

        }

        // PWA Install Prompt Handler
        let deferredPrompt;
        window.addEventListener('beforeinstallprompt', (e) => {
            console.log('PWA install prompt available');
            e.preventDefault();
            deferredPrompt = e;

            // Optionally show custom install button
            // You can add UI here to prompt user to install
        });

        // Track PWA installation
        window.addEventListener('appinstalled', () => {
            console.log('PWA installed successfully');
            deferredPrompt = null;
        });
    </script>

    <script type="module" src="src/main.js"></script>
</body>

</html>